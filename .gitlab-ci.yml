image: alpine
stages:
  - compile
  - delpoy

compile:
  stage: compile
  script: cat file1.txt file2.txt > compiled.txt
  artifacts:
    paths:
    - compiled.txt
    
delpoy:
  stage: delpoy
  before_script: 
  - apk add --no-cache openssh-client
  - eval $(ssh-agent -s)
  - mkdir -p .ssh
  - echo "$admin_key_stockholm" >> .ssh/admin_key_stockholm-vm
  - chmod 600 .ssh/admin_key_stockholm-vm
  - pwd .ssh/admin_key_stockholm-vm
  - cat .ssh/admin_key_stockholm-vm
  script: ssh -T -o StrictHostKeyChecking=no ec2-user@13.48.123.71 -i /builds/Skripnichenko/test/.ssh/admin_key_stockholm

    